<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" class="fsvs demo">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="icon" type="image/gif" href="/img/favicon.ico">
    <title>聚聚外烩</title>
    <link href="/css/default.css" rel="stylesheet"/>
    <link href="/css/in_style.css" rel="stylesheet"/>
    <script src="/js/jquery-2.1.3.min.js"></script>
    <script src="/js/fsvs.js"></script>
    <link href="/css/animate.css" rel="stylesheet"/>
    <link href="/css/index.css" rel="stylesheet"/>
    <script>
        $(function () {
            var fsvs = $.fn.fsvs({
                speed: 1000
            });
        });
    </script>
</head>
<body>
<div id="fsvs-body">
    <!--side1-->
    <div class="slide top home">
        <#include "/common/nav.htm"/>

        <div class="side1_logo show"></div>
        <div class="side1_slogan show"></div>
    </div>


    <!--side2-->
    <div class="slide college">
        <div class="nav_d" id="nav_d1">
            <#include "/common/nav.htm"/>
        </div>
         <#if menuList??>
             <#list showMenus as menu>
                 <a id="side2_item${menu_index+1}" class="card_Container" href="${(menu.homeMenuDto.menuUrl)!}?mId=${(menu.homeMenuDto.id)!}">
                     <div id="mask"><img src="${wwwdomain!}${(menu.homeMenuDto.picture)!}" border="0"></div>
                     <div id="cover"><img src="${wwwdomain!}${(menu.homeMenuDto.picture)!}" border="0"></div>
                     <span>${(menu.homeMenuDto.cname)!}</span>
                 </a>
             </#list>
         </#if>
    </div>

    <!--side3-->
    <div class="slide news">
        <div class="nav_d" id="nav_d2">
            <#include "/common/nav.htm"/>
        </div>

        <div class="side_box side3bg" style="background:url(/img/side3_title.jpg) no-repeat">
            <div class="side3_title_f">
                ${(server.summary)!}
            </div>
            <a class="more" href="${(server.menuUrl)!}?mId=${(server.id)!}">更多</a>

            <div class="side3_cont">
                <div class="picker">
                    <ul move=0>
                        <#if serverPics??>
                            <#list serverPics as pic>
                                <li <#if pic_index == 1>class="cur"</#if>><img src="${(wwwdomain)!}${(pic.pic)!}" border="0" alt="${(pic.described)!}"></li>
                            </#list>
                        </#if>
                    </ul>
                </div>
                <div class="prebtn"></div>
                <div class="nxtbtn"></div>
                <#if serverPics??>
                    <#list serverPics as pic>
                        <#if pic_index == 1>
                            <div class="kind">${(pic.described)!}</div>
                        </#if>
                    </#list>
                </#if>

               <!--  <a class="more" href="${(server.menuUrl)!}?mId=${(server.id)!}"><span>更多</span></a> -->
            </div>
        </div>

    </div>


    <!--side4-->
    <div class="slide train">
        <div class="nav_d" id="nav_d3">
            <#include "/common/nav.htm"/>
        </div>

        <div class="side_box side4bg">
        <div class="mas"></div>
            <div class="side4_title_f">
                ${(book.summary)!}
            </div>
            <!-- <a class="more" href="###">更多</a> -->
            <a class="more" href="${(book.menuUrl)!}?mId=${(book.id)!}">更多</a>

<!--            <div class="side4_cont">
                <ul>
                    <#if subMenu??>
                        <#list subMenu as sub>
                            <li>
                                <img src="${(wwwdomain)!}${(sub.picture)!}" border="0">
                                <p>${(sub.cname)!}<br><span class="simsum">${(sub.ename)!}</span></p>
                                <a href="${(book.menuUrl)!}?mId=${(book.id)!}"><span>更多</span></a>
                            </li>
                        </#list>
                    </#if>
                </ul>
            </div> -->
            
            <div class="side4_cont">
				<div class="picker2">
				<div class="trace" move=0>
					<ul>
						<#if subMenu??>
                        <#list subMenu as sub>
                            <li>
	                                <img src="${(wwwdomain)!}${(sub.picture)!}" border="0">
	                                <p>${(sub.cname)!}<br><span class="simsum">${(sub.ename)!}</span></p>
                                	<!-- <a href="${(book.menuUrl)!}?mId=${(book.id)!}"><span>更多</span></a> -->
                            </li>
                        </#list>
                    	</#if>
					</ul>
				</div>
				</div>
				<div class="leftbtn"></div>
				<div class="rightbtn"></div>
			</div>
        </div>

    </div>

    <!--side5-->
    <div class="slide event">
        <div class="nav_d" id="nav_d4">
            <#include "/common/nav.htm"/>
        </div>
        <div class="side_box side5bg" style="background:url(img/side5_title.jpg) no-repeat 0 bottom">
            <div class="triangle"></div>
            <div class="side5_title_f">
                ${(company.summary)!}
            </div>
            <a class="more" href="${(company.menuUrl)!}?mId=${(company.id)!}"><span>更多</span></a>
        </div>
    </div>

    <!--side6-->
    <div class="slide activity">
        <div class="nav_d" id="nav_d5">
            <#include "/common/nav.htm"/>
        </div>

        <div class="side_box side6bg">
            <div class="side6_right"><img src="/img/side6_title.jpg" border="0"></div>
            <div class="side6_title_f">
                ${(activity.summary)!}
            </div>
            <a class="more" href="${(activity.menuUrl)!}?mId=${(activity.id)!}"><span>更多</span></a>
        </div>
    </div>

    <!--side7-->
    <div class="slide contact">
        <div class="nav_d" id="nav_d6">
            <#include "/common/nav.htm"/>
        </div>

        <div class="side_box side7bg">
            <div class="side7_right"></div>
            <div class="side7_title_f">${(contact.summary)!}
            </div>
            <a class="more" href="${(contact.menuUrl)!}?mId=${(contact.id)!}"><span>更多</span></a>
        </div>
    </div>
</div>

<script>

$(function(){
	//菜单变化
	$('.mu').hover(function(){
		$(this).html($(this).attr('e_data'))
	},function(){
		$(this).html($(this).attr('c_data'))
	});
	
	//三角形对角高度
	var _tHeight = $('.side5bg').height()
	$('.triangle').css("border-bottom", _tHeight + "px #2b76ae solid")
	
	//向左滚动
	$(".prebtn").on("click", function() {
		var _index = $('.side3_cont .picker .trace ul li.cur').index()
		moveLeft(".side3_cont .picker .trace", _index, 300);
	});
	//向右滚动
	$(".nxtbtn").on("click", function() {
		var _index = $('.side3_cont .picker .trace ul li.cur').index()
		moveRight(".side3_cont .picker .trace", _index, -300);
	});
	
	
	//向左滚动
	$(".leftbtn").on("click", function() {
		move_Left($(this).parent().find('.trace'), 1000);
	});
	//向右滚动
	$(".rightbtn").on("click", function() {
		move_Right($(this).parent().find('.trace'), -1000);
	});
})

function moveLeft(selector, index, distance) {
	var _pickerCount = $(selector).find('ul li')
	var _count = $(selector).find('li').length*300 - 900
	var _move = parseInt($(selector).attr('move'))
	var left = _move + distance
	if(_move >= 0){
		left=-_count
		$(selector).find('li').eq($(selector).find('li').length-2).addClass('cur').siblings().removeClass('cur')
	}else{
		left = left
		$(selector).find('li').eq(index-1).addClass('cur').siblings().removeClass('cur')
	}
	$(selector).css({
		"left": left + "px"
	}).attr('move',left)
	$('.kind').html($(selector).find('li.cur img').attr('alt'))
};

function moveRight(selector, index, distance) {
	var _pickerCount = $(selector).find('ul li')
	var _count = $(selector).find('li').length*300 - 900
	var _move = parseInt($(selector).attr('move'))
	var left = _move + distance
	//alert(left)
	//alert(_move)
	if(_move <= -_count){
		$(selector).find('ul').append(_pickerCount.clone())
	}
	left = left
	$(selector).find('li').eq(index+1).addClass('cur').siblings().removeClass('cur')

	$(selector).css({
		"left": left + "px"
	}).attr('move',left)
	//alert($(selector).attr('move'))
	$('.kind').html($(selector).find('li.cur img').attr('alt'))
};



function move_Left(selector, distance) {
	var _pickerCount = selector.find('ul').eq(0)
	var _count = selector.find('li').length*1000 - selector.find('ul').length*1000
	var _move = parseInt(selector.attr('move'))
	var left = _move + distance
	if(_move >= 0){
		left=-_count
	}else{
		left = left
	}
	selector.css({
		"left": left + "px"
	}).attr('move',left)
};

function move_Right(selector, distance) {
	var _pickerCount = selector.find('ul').eq(0)
	var _count = selector.find('li').length*1000 - selector.find('ul').length*1000
	var _move = parseInt(selector.attr('move'))
	var left = _move + distance
	if(_move <= -_count){
		selector.append(_pickerCount.clone())
	}
	left = left

	selector.css({
		"left": left + "px"
	}).attr('move',left)
};
</script>

</body>
</html>